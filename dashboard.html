<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard - NotesTaker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header><a id="home" href="#">NotesTaker</a></header>

<h2 id="welcome">Welcome!</h2>

<main class="dashboard-container">
  <a href="notes.html" class="dashboard-link" id= "getNotes">📝 Notes</a>
  <a href="profile.html" class="dashboard-link">👤 Profile</a>
</main>

<footer><a id="logout" href="#">Log out</a> </footer>
<script>
  const userId = localStorage.getItem("userId");
  const userName = localStorage.getItem("userName");

  if (!userId) {
    alert("User not signed in!");
    window.location.href = "signin.html"; // Not signed in
  } else {
    document.getElementById("welcome").textContent = `Welcome, ${userName}`;
  }

  // document.getElementById("getNotes").addEventListener("click", function (e) {
  //   e.preventDefault();
  //
  //   fetch(`http://localhost:8080/note/${userId}`)
  //           .then(res => res.json())
  //           .then(data => {
  //             if (data.noteAPIResponseCode !== "200") {
  //               throw new Error(data.userAPIResponseData || "Failed to load notes.")
  //             }
  //
  //             localStorage.setItem("userNotes", JSON.stringify(data.noteAPIResponseData));
  //             window.location.href = "notes.html";
  //           })
  //           .catch(err => alert(err.message));
  // })

  document.getElementById("logout").addEventListener("click", function (e) {
    e.preventDefault();

    localStorage.clear();
    window.location.href = "index.html";
  });
</script>

</body>
</html>
